# =============================================================================
# Cloudflare Tunnel Configuration for GENESIS v3 Backend
# =============================================================================
# Copy this file to ~/.cloudflared/config.yml and replace <TUNNEL_ID> with
# your actual tunnel ID (obtained from: cloudflared tunnel list).
#
# Or run scripts/setup-tunnel.sh to auto-generate this configuration.
#
# See: https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/
# =============================================================================

tunnel: <TUNNEL_ID>
credentials-file: /root/.cloudflared/<TUNNEL_ID>.json

ingress:
  # API backend (REST endpoints + WebSocket via Socket.IO)
  - hostname: api.genesis-pj.net
    service: http://localhost:8000
    originRequest:
      noTLSVerify: false
      connectTimeout: 30s
      keepAliveTimeout: 90s

  # WebSocket dedicated subdomain (optional, routes to same backend)
  - hostname: ws.genesis-pj.net
    service: http://localhost:8000
    originRequest:
      noTLSVerify: false
      connectTimeout: 30s
      keepAliveTimeout: 90s

  # Catch-all: return 404 for any unmatched hostname
  - service: http_status:404
